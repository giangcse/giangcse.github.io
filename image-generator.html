<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo ảnh với AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">Tạo ảnh với AI</h1>

        <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md p-6">
            <div class="mb-4">
                <label for="prompt" class="block text-gray-700 text-sm font-bold mb-2">Nhập mô tả ảnh:</label>
                <textarea id="prompt" rows="4"
                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Mô tả ảnh bạn muốn tạo..."></textarea>
            </div>

            <button id="generateBtn"
                class="w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-200">
                Tạo ảnh
            </button>

            <div id="loading" class="hidden mt-4 text-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
                <p class="mt-2 text-gray-600">Đang tạo ảnh...</p>
            </div>

            <div id="result" class="mt-6 hidden">
                <h2 class="text-xl font-bold mb-4">Kết quả:</h2>
                <div id="imageContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('generateBtn').addEventListener('click', async () => {
            const prompt = document.getElementById('prompt').value;
            if (!prompt) {
                alert('Vui lòng nhập mô tả ảnh!');
                return;
            }

            const loading = document.getElementById('loading');
            const result = document.getElementById('result');
            const imageContainer = document.getElementById('imageContainer');

            loading.classList.remove('hidden');
            result.classList.add('hidden');
            imageContainer.innerHTML = '';

            try {
                const response = await fetch('https://image-generator.giang-cse.workers.dev/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt })
                });

                const data = await response.json();

                if (data.images) {
                    data.images.forEach(imageData => {
                        const img = document.createElement('img');
                        img.src = `data:image/png;base64,${imageData}`;
                        img.className = 'w-full rounded-lg shadow-md';
                        imageContainer.appendChild(img);
                    });

                    result.classList.remove('hidden');
                } else {
                    alert('Không thể tạo ảnh. Vui lòng thử lại!');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Có lỗi xảy ra. Vui lòng thử lại!');
            } finally {
                loading.classList.add('hidden');
            }
        });
    </script>
</body>

</html>